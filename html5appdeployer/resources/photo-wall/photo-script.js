startRecording=function(){var e=document.getElementById("video");if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){navigator.mediaDevices.getUserMedia({video:true}).then(function(t){e.srcObject=t;e.play()})}else{console.log("No access to camera...")}document.getElementById("video").style.display="block";document.getElementById("canvas").style.display="none";document.getElementById("snap").style.display="inline";document.getElementById("reset").style.display="none";document.getElementById("send").style.display="none"};stopRecording=function(){video.pause();video.src="";var e=video.srcObject.getTracks();for(i in e){e[i].stop()}};document.addEventListener("DOMContentLoaded",function(e){document.getElementById("create").addEventListener("click",function(){document.getElementById("photo").style.display="none"});document.getElementById("photo").addEventListener("click",function(){document.getElementById("photo-dialog").setAttribute("class","fd-dialog-docs-static fd-dialog fd-dialog--active");startRecording()});document.getElementById("photo-dialog-close").addEventListener("click",function(){document.getElementById("photo-dialog").setAttribute("class","fd-dialog-docs-static fd-dialog");stopRecording()});var t=document.getElementById("canvas");var n=t.getContext("2d");var d=document.getElementById("video");document.getElementById("snap").addEventListener("click",function(){n.drawImage(d,0,0,400,300);document.getElementById("video").style.display="none";document.getElementById("canvas").style.display="block";document.getElementById("snap").style.display="none";document.getElementById("reset").style.display="inline";document.getElementById("send").style.display="inline"});document.getElementById("reset").addEventListener("click",function(){document.getElementById("video").style.display="block";document.getElementById("canvas").style.display="none";document.getElementById("snap").style.display="inline";document.getElementById("reset").style.display="none";document.getElementById("send").style.display="none"});document.getElementById("send").addEventListener("click",function(){var e=document.getElementById("canvas");fetch("photo-wall",{method:"POST",headers:{"Content-Type":"image/png",filekey:"key-"+Date.now()},body:e.toDataURL("image/png")});document.getElementById("photo-dialog").setAttribute("class","fd-dialog-docs-static fd-dialog");document.getElementById("photo").style.display="none";stopRecording()})});